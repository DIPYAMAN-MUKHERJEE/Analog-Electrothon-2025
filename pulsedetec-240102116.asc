Version 4
SHEET 1 2516 844
WIRE 688 -720 656 -720
WIRE 1120 -704 1056 -704
WIRE 1120 -672 1120 -704
WIRE 688 -624 688 -640
WIRE 832 -624 688 -624
WIRE 688 -608 688 -624
WIRE 1056 -592 1056 -704
WIRE 576 -512 576 -720
WIRE 688 -512 688 -528
WIRE 688 -512 576 -512
WIRE 576 -496 576 -512
WIRE 1056 -416 1056 -512
WIRE 832 -400 832 -624
WIRE 1024 -400 832 -400
WIRE 1328 -384 1088 -384
WIRE 1024 -368 640 -368
WIRE 1520 -304 1328 -304
WIRE 1328 -288 1328 -304
WIRE 1056 -208 1056 -352
WIRE 1328 -208 1056 -208
WIRE 1520 -208 1520 -240
WIRE 1520 -208 1328 -208
WIRE 1056 -192 1056 -208
WIRE 304 -160 192 -160
WIRE 528 -160 384 -160
WIRE 192 -96 192 -160
WIRE 1248 16 688 16
WIRE 1168 64 816 64
WIRE 640 80 640 -368
WIRE 688 80 688 16
WIRE 688 80 640 80
WIRE 1168 112 1168 64
WIRE 432 128 208 128
WIRE 1120 128 864 128
WIRE 688 144 688 80
WIRE 720 144 688 144
WIRE 816 144 816 64
WIRE 816 144 784 144
WIRE -192 160 -192 80
WIRE 432 160 432 128
WIRE 1120 176 944 176
WIRE -112 208 -112 80
WIRE 816 224 816 144
WIRE 864 224 864 128
WIRE 864 224 816 224
WIRE 1168 256 1168 192
WIRE 1248 256 1248 16
WIRE 208 272 208 208
WIRE 176 288 -112 288
WIRE 528 288 528 -160
WIRE 528 288 352 288
WIRE 816 288 816 224
WIRE 336 304 240 304
WIRE 688 304 688 144
WIRE 688 304 496 304
WIRE -112 320 -112 288
WIRE 176 320 112 320
WIRE 944 320 944 176
WIRE 496 336 496 304
WIRE 448 352 384 352
WIRE 384 368 384 352
WIRE 336 400 336 304
WIRE 352 400 352 288
WIRE 448 400 352 400
WIRE -112 448 -112 400
WIRE 112 464 112 320
WIRE 112 464 -32 464
WIRE 944 480 944 400
WIRE 208 496 208 336
WIRE 336 496 336 400
WIRE 496 496 336 496
WIRE -32 576 -32 544
FLAG -192 160 0
FLAG 432 160 0
FLAG 208 496 0
FLAG -32 576 0
FLAG 816 288 0
FLAG 384 368 0
FLAG 944 480 0
FLAG 336 400 out
FLAG 688 144 c1
FLAG 192 -96 0
FLAG 1056 -192 0
FLAG 1120 -672 0
FLAG 576 -496 0
FLAG -112 448 0
SYMBOL cap 720 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 61 85 Invisible 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine IC=0
SYMBOL voltage 208 224 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -96 80 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL OpAmps\\LT1002 208 240 R0
SYMATTR InstName U1
SYMBOL sw 1168 96 R0
SYMATTR InstName S2
SYMBOL bv 944 304 R0
SYMATTR InstName B1
SYMATTR Value V=  if ((V(out)<1.2) ,5,0)
SYMBOL res 480 400 R0
SYMATTR InstName R1
SYMATTR Value 6K
SYMBOL res 1264 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1000K
SYMBOL sw 496 320 R0
SYMATTR InstName S1
SYMBOL bv 400 -160 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B2
SYMATTR Value V= if(V(out)>1.2,5,0)
SYMBOL voltage -32 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 20 0 0 0 0.15)
SYMBOL OpAmps\\LT1002 1056 -448 R0
SYMATTR InstName U2
SYMBOL voltage 1056 -496 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL voltage 672 -720 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 12
SYMBOL res 672 -736 R0
SYMATTR InstName R3
SYMATTR Value 2
SYMBOL res 672 -624 R0
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res -128 192 R0
SYMATTR InstName R6
SYMATTR Value 7
SYMBOL res -128 304 R0
SYMATTR InstName R7
SYMATTR Value 5
SYMBOL res 1312 -400 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1312 -304 R0
SYMATTR InstName R8
SYMATTR Value 2k
SYMBOL diode 1504 -304 R0
SYMATTR InstName D1
TEXT -192 264 Left 0 ;reference voltage
TEXT 104 152 Left 0 ;offset voltage
TEXT -192 600 Left 2 !.tran 5
TEXT 392 552 Left 2 !.model sw sw()
TEXT 944 -8 Left 2 ;this portion is for the discharge of the capacitor
TEXT 976 -88 Left 2 ;MIN TIME I WANTED WAS around 84ms
